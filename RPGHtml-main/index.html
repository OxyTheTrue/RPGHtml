<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RPG Visual Mastery Pro - Bleeding & Sound Edition</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div id="stat-tooltip">
    <i id="tooltip-icon"></i>
    <div class="stat-name" id="tooltip-name"></div>
    <div class="stat-detail">Nível: <span id="tooltip-level"></span></div>
    <div class="stat-detail">Valor atual: <span class="stat-value" id="tooltip-value"></span></div>
</div>
<div id="start-menu">
    <div class="game-title">MASTERY RPG</div>
    <!-- Etapa 0: apenas botões do menu -->
    <div id="menu-step-buttons" class="menu-step">
        <button class="action-btn btn-atk btn-menu" data-action="start-new">
            <i class="fa-solid fa-play"></i> NOVO JOGO
        </button>
        <button id="continue-btn" class="action-btn btn-heal btn-menu" style="display: none;">
            <i class="fa-solid fa-forward"></i> CONTINUAR
        </button>
    </div>
    <!-- Etapa 1: nome (só ao clicar em Novo Jogo) -->
    <div id="menu-step-name" class="menu-step" style="display: none;">
        <input type="text" id="player-name-input" class="name-input" placeholder="Digite seu nome..." maxlength="12">
        <button class="action-btn btn-heal btn-menu" data-action="menu-name-next">
            <i class="fa-solid fa-arrow-right"></i> PRÓXIMO
        </button>
        <button class="action-btn btn-def btn-menu" data-action="menu-back">
            <i class="fa-solid fa-arrow-left"></i> VOLTAR
        </button>
    </div>
    <!-- Etapa 2: dificuldade (Fácil / Normal / Difícil) -->
    <div id="menu-step-difficulty" class="menu-step" style="display: none;">
        <p class="menu-subtitle">Escolha a dificuldade</p>
        <div class="menu-difficulty-btns">
            <button class="action-btn btn-heal btn-diff" data-difficulty="0.75">FÁCIL</button>
            <button class="action-btn btn-def btn-diff" data-difficulty="1">NORMAL</button>
            <button class="action-btn btn-atk btn-diff" data-difficulty="1.35">DIFÍCIL</button>
        </div>
        <button class="action-btn btn-def btn-menu" data-action="menu-back">
            <i class="fa-solid fa-arrow-left"></i> VOLTAR
        </button>
    </div>
</div>
<div class="overlay" id="overlay"></div>
<div id="skill-detail-modal">
    <div id="skill-detail-content"></div>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px;">
        <button id="learn-confirm-btn" class="action-btn btn-heal">APRENDER</button>
        <button class="action-btn btn-atk">VOLTAR</button>
    </div>
</div>
<div id="skill-modal">
    <h3 style="color: var(--mana); margin-top: 0; letter-spacing: 2px;">ÁRVORE DE HABILIDADES</h3>
    <div style="background: rgba(0,0,0,0.3); padding: 5px 15px; border-radius: 20px; display: inline-block; margin-bottom: 10px;">
        <small>PONTOS DISPONÍVEIS: <span id="p-skill-points" style="color:var(--accent); font-weight: bold;">0</span></small>
    </div>
    <div class="skill-tree-grid" id="skill-tree-content"></div>
    <button class="action-btn btn-def" style="width: 100%; margin-top: 20px;">SAIR</button>
</div>
<div id="shop-modal">
    <h3 class="shop-title">LOJA DO ALQUIMISTA</h3>
    <div class="shop-grid shop-grid-2x4">
        <button class="action-btn shop-item-btn shop-item" data-item-type="potion">
            <span class="shop-item-icon"><i class="fa-solid fa-flask"></i></span>
            <span class="shop-item-name">Poção HP</span>
            <span class="shop-item-desc">+18 HP</span>
            <span class="shop-item-price"><span class="item-price">28</span> G</span>
        </button>
        <button class="action-btn shop-item-btn shop-item" data-item-type="mana_potion">
            <span class="shop-item-icon"><i class="fa-solid fa-flask-vial"></i></span>
            <span class="shop-item-name">Poção MP</span>
            <span class="shop-item-desc">+22 MANA</span>
            <span class="shop-item-price"><span class="item-price">32</span> G</span>
        </button>
        <button class="action-btn shop-item-btn shop-item" data-item-type="boots">
            <span class="shop-item-icon"><i class="fa-solid fa-boot"></i></span>
            <span class="shop-item-name">Botas</span>
            <span class="shop-item-desc">+SPD (Ativo)</span>
            <span class="shop-item-price"><span class="item-price">58</span> G</span>
        </button>
        <button class="action-btn shop-item-btn shop-item" data-item-type="shield">
            <span class="shop-item-icon"><i class="fa-solid fa-shield-halved"></i></span>
            <span class="shop-item-name">Escudo</span>
            <span class="shop-item-desc">-Dano (Ativo)</span>
            <span class="shop-item-price"><span class="item-price">78</span> G</span>
        </button>
        <button class="action-btn shop-item-btn shop-item shop-item-span-2" data-item-type="coin">
            <span class="shop-item-icon"><i class="fa-solid fa-coins"></i></span>
            <span class="shop-item-name">Moeda da Sorte</span>
            <span class="shop-item-desc">+Sorte (Ativo)</span>
            <span class="shop-item-price"><span class="item-price">125</span> G</span>
        </button>
    </div>
    <button class="action-btn btn-def" id="close-shop-btn" data-action="close-shop">FECHAR</button>
</div>
<div id="settings-modal">
    <h3 class="settings-title">CONFIGURAÇÕES</h3>
    <div class="settings-body">
        <label class="settings-row">
            <input type="checkbox" id="settings-mute" data-setting="mute">
            <span><i class="fa-solid fa-volume-high"></i> Mudo (desmarque para som)</span>
        </label>
        <button class="action-btn btn-heal" data-action="manual-save">
            <i class="fa-solid fa-floppy-disk"></i> SALVAR PROGRESSO
        </button>
    </div>
    <button class="action-btn btn-def" data-action="close-settings">FECHAR</button>
</div>
<div id="death-modal">
    <h2 style="color: var(--primary); margin-top: 0;">Você conheceu a DERROTA!</h2>
    <p style="font-size: 0.9rem; opacity: 0.8; line-height: 1.4;">
        Seu conhecimento e atributos foram preservados,<br>mas seu <b>ouro, xp e itens</b> se perderam.
    </p>
    <button class="action-btn btn-heal" style="width: 100%; margin-bottom: 10px;" data-action="restart-after-death">
        <i class="fa-solid fa-rotate-left"></i> TENTAR NOVAMENTE
    </button>
    <button class="action-btn btn-atk" style="width: 100%; background: #441111;" data-action="exit-to-menu">
        <i class="fa-solid fa-door-open"></i> DESISTIR
    </button>
</div>
<div class="main-wrapper" id="game-ui">
    <button class="action-btn btn-def" id="btn-settings" data-action="open-settings" style="position: absolute; top: 20px; left: 25px; padding: 8px 12px; min-height: auto;">
        <i class="fa-solid fa-gear"></i>
    </button>
    <aside id="hero-sidebar">
        <div class="hero-header">
            <small>NÍVEL <span id="p-lv">1</span></small>
            <h2 id="p-display-name">GUERREIRO</h2>
        </div>
        <div class="attribute-card">
            <div class="attr-info" data-stat="str"><i class="fa-solid fa-hand-fist"></i> FORÇA NÍVEL <span class="attr-value" id="stat-str">1</span></div>
            <button class="lvl-up-btn" data-stat="str">+</button>
        </div>
        <div class="attribute-card">
            <div class="attr-info" data-stat="spd"><i class="fa-solid fa-bolt"></i> VELOCIDADE NÍVEL <span class="attr-value" id="stat-spd">1</span></div>
            <button class="lvl-up-btn" data-stat="spd">+</button>
        </div>
        <div class="attribute-card">
            <div class="attr-info" data-stat="int"><i class="fa-solid fa-brain"></i> INTELIGÊNCIA NÍVEL <span class="attr-value" id="stat-int">1</span></div>
            <button class="lvl-up-btn" data-stat="int">+</button>
        </div>
        <div class="attribute-card">
            <div class="attr-info" data-stat="luk"><i class="fa-solid fa-clover"></i> SORTE NÍVEL <span class="attr-value" id="stat-luk">1</span></div>
            <button class="lvl-up-btn" data-stat="luk">+</button>
        </div>
        <div class="attribute-card">
            <div class="attr-info" data-stat="vit"><i class="fa-solid fa-heart-pulse"></i> VITALIDADE NÍVEL <span class="attr-value" id="stat-vit">1</span></div>
            <button class="lvl-up-btn" data-stat="vit">+</button>
        </div>
        <button class="action-btn btn-open-tree" data-action="open-skill-tree">
            <i class="fa-solid fa-diagram-project"></i> ÁRVORE DE SKILLS
        </button>
        <div style="margin-top: 20px;">
            <small><i class="fa-solid fa-star"></i> EXPERIÊNCIA</small>
            <div class="status-bar"><div id="p-xp-bar" class="bar-fill xp-fill"></div></div>
        </div>
    </aside>
    <main id="game-container">
        <button class="action-btn btn-atk btn-exit" data-action="save-exit">
            <i class="fa-solid fa-door-open"></i> SAIR
        </button>
        <div class="enemy-card">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h3 id="enemy-name" style="margin:0">BUSCANDO...</h3>
                <div id="enemy-badges"></div>
            </div>
            <div class="enemy-sprite-container"><img id="enemy-img" src="" alt="" class="enemy-sprite"></div>
            <div class="status-bar"><div id="enemy-bar" class="bar-fill hp-fill"></div></div>
            <small><span id="enemy-hp">0</span> / <span id="enemy-max-hp">0</span> HP</small>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
            <div>
                <small><i class="fa-solid fa-heart"></i> VIDA: <span id="p-hp">0</span>/<span id="p-max-hp">0</span> <span id="p-status-icons"></span></small>
                <div class="status-bar"><div id="p-hp-bar" class="bar-fill hp-fill"></div></div>
            </div>
            <div>
                <small><i class="fa-solid fa-wand-sparkles"></i> MANA: <span id="p-mana">0</span></small>
                <div class="status-bar"><div id="p-mana-bar" class="bar-fill mana-fill"></div></div>
            </div>
            <div style="grid-column: span 2;">
                <small><i class="fa-solid fa-fire-glow"></i> FÚRIA ESPECIAL</small>
                <div class="status-bar" style="height: 6px;"><div id="p-furia-bar" class="bar-fill furia-fill"></div></div>
            </div>
        </div>
        <div class="log" id="game-log"></div>
        <div class="actions" id="action-buttons">
            </div>
    </main>
    <aside id="right-column">
        <button class="action-btn btn-heal btn-shop" data-action="open-shop">
            <i class="fa-solid fa-store"></i> LOJA
        </button>
        <div id="inventory-container">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <small><i class="fa-solid fa-suitcase"></i> INVENTÁRIO</small>
                <div class="gold-container">
                    <i class="fa-solid fa-coins" style="color:var(--accent)"></i>
                    <span id="p-gold" style="font-weight: bold; color: var(--accent);">0</span>
                </div>
            </div>
            <div class="inventory-slots" id="p-slots">
                <div class="slot"></div>
                <div class="slot"></div>
                <div class="slot"></div>
                <div class="slot"></div>
                <div class="slot"></div>
            </div>
        </div>
    </aside>
</div>
<div id="admin-panel" class="admin-panel" aria-hidden="true"></div>
<link rel="stylesheet" href="admin-panel.css">
<script type="module" src="js/main.js"></script>
</body>
</html>
