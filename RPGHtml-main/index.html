<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RPG Visual Mastery Pro - Bleeding & Sound Edition</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="admin-panel.css">
    <script src="js/SceneManager.js"></script>
    <script src="js/BaseScene.js"></script>
    <script src="js/CombatScene.js"></script>
    <script src="js/ShopScene.js"></script>
    <script src="js/Player.js"></script>
    <script src="js/Enemy.js"></script>
    <script src="js/Shop.js"></script>
    <script src="js/GameConfig.js"></script>
    <script src="js/Game.js"></script>
    <script src="js/UI.js"></script>
    <script src="js/SoundManager.js"></script>
    <script src="js/SaveManager.js"></script>
    <script src="js/main.js"></script>
</head>
<body>
<div id="stat-tooltip">
    <i id="tooltip-icon"></i>
    <div class="stat-name" id="tooltip-name"></div>
    <div class="stat-detail">Nível: <span id="tooltip-level"></span></div>
    <div class="stat-detail">Valor atual: <span class="stat-value" id="tooltip-value"></span></div>
</div>
<div id="start-menu">
    <div class="game-title">MASTERY RPG</div>
    <!-- Etapa 0: apenas botões do menu -->
    <div id="menu-step-buttons" class="menu-step">
        <button class="action-btn btn-atk btn-menu" data-action="start-new">
            <i class="fa-solid fa-play"></i> NOVO JOGO
        </button>
        <button class="action-btn btn-heal btn-menu" data-action="continue-current">
            <i class="fa-solid fa-forward"></i> CONTINUAR
        </button>
        <button class="action-btn btn-def btn-menu" data-action="load-manual">
            <i class="fa-solid fa-folder-open"></i> CARREGAR
        </button>
    </div>
    <!-- Etapa 1: nome (só ao clicar em Novo Jogo) -->
    <div id="menu-step-name" class="menu-step" style="display: none;">
        <input type="text" id="player-name-input" class="name-input" placeholder="Digite seu nome..." maxlength="12">
        <button class="action-btn btn-heal btn-menu" data-action="menu-name-next">
            <i class="fa-solid fa-arrow-right"></i> PRÓXIMO
        </button>
        <button class="action-btn btn-def btn-menu" data-action="menu-back">
            <i class="fa-solid fa-arrow-left"></i> VOLTAR
        </button>
    </div>
    <!-- Etapa 2: dificuldade (Fácil / Normal / Difícil) -->
    <div id="menu-step-difficulty" class="menu-step" style="display: none;">
        <p class="menu-subtitle">Escolha a dificuldade</p>
        <div class="menu-difficulty-btns">
            <button class="action-btn btn-heal btn-diff" data-difficulty="0.75">FÁCIL</button>
            <button class="action-btn btn-atk btn-diff" data-difficulty="1">NORMAL</button>
            <button class="action-btn btn-def btn-diff" data-difficulty="1.25">DIFÍCIL</button>
        </div>
        <button class="action-btn btn-def btn-menu" data-action="menu-back">
            <i class="fa-solid fa-arrow-left"></i> VOLTAR
        </button>
    </div>
    <!-- Etapa 3: Carregar saves manuais -->
    <div id="menu-step-load" class="menu-step" style="display: none;">
        <p class="menu-subtitle">SELECIONE UM SAVE</p>
        <div class="save-slots-container">
            <div class="save-slot" data-slot="0">
                <div class="save-slot-header">
                    <span class="save-slot-title">SLOT 1</span>
                    <button class="save-slot-delete" data-slot="0" title="Deletar save">
                        <i class="fa-solid fa-trash"></i>
                    </button>
                </div>
                <div class="save-slot-content empty">
                    <i class="fa-solid fa-plus"></i>
                    <span>Vazio</span>
                </div>
            </div>
            
            <div class="save-slot" data-slot="1">
                <div class="save-slot-header">
                    <span class="save-slot-title">SLOT 2</span>
                    <button class="save-slot-delete" data-slot="1" title="Deletar save">
                        <i class="fa-solid fa-trash"></i>
                    </button>
                </div>
                <div class="save-slot-content empty">
                    <i class="fa-solid fa-plus"></i>
                    <span>Vazio</span>
                </div>
            </div>
            
            <div class="save-slot" data-slot="2">
                <div class="save-slot-header">
                    <span class="save-slot-title">SLOT 3</span>
                    <button class="save-slot-delete" data-slot="2" title="Deletar save">
                        <i class="fa-solid fa-trash"></i>
                    </button>
                </div>
                <div class="save-slot-content empty">
                    <i class="fa-solid fa-plus"></i>
                    <span>Vazio</span>
                </div>
            </div>
        </div>
        <button class="action-btn btn-def btn-menu" data-action="menu-back">
            <i class="fa-solid fa-arrow-left"></i> VOLTAR
        </button>
    </div>
</div>
<div class="overlay" id="overlay"></div>
<div id="skill-detail-modal" style="display: none;">
    <div id="skill-detail-content"></div>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px;">
        <button id="learn-confirm-btn" class="action-btn btn-heal">APRENDER</button>
        <button class="action-btn btn-atk">VOLTAR</button>
    </div>
</div>
<div id="skill-modal" style="display: none;">
    <h3 style="color: var(--mana); margin-top: 0; letter-spacing: 2px;">ÁRVORE DE HABILIDADES</h3>
    <div style="background: rgba(0,0,0,0.3); padding: 5px 15px; border-radius: 20px; display: inline-block; margin-bottom: 10px;">
        <small>PONTOS DISPONÍVEIS: <span id="p-skill-points" style="color:var(--accent); font-weight: bold;">0</span></small>
    </div>
    <div class="skill-tree-grid" id="skill-tree-content"></div>
    <button class="action-btn btn-def" style="width: 100%; margin-top: 20px;">SAIR</button>
</div>
<div id="shop-modal" style="display: none;">
    <h3 class="shop-title">LOJA DO ALQUIMISTA</h3>
    
    <!-- Itens Consumíveis -->
    <h4 style="color: var(--heal); margin-bottom: 10px;">CONSUMÍVEIS</h4>
    <div class="shop-grid shop-grid-2x2">
        <button class="action-btn shop-item-btn shop-item" data-item-type="potion">
            <span class="shop-item-icon"><i class="fa-solid fa-flask"></i></span>
            <span class="shop-item-name">Poção HP</span>
            <span class="shop-item-desc">+18 HP</span>
            <span class="shop-item-price"><span class="item-price">28</span> G</span>
        </button>
        <button class="action-btn shop-item-btn shop-item" data-item-type="mana_potion">
            <span class="shop-item-icon"><i class="fa-solid fa-flask-vial"></i></span>
            <span class="shop-item-name">Poção MP</span>
            <span class="shop-item-desc">+22 MANA</span>
            <span class="shop-item-price"><span class="item-price">32</span> G</span>
        </button>
    </div>
    
    <!-- Itens Ativos -->
    <h4 style="color: var(--primary); margin: 20px 0 10px;">ITENS ATIVOS</h4>
    <div class="shop-grid shop-grid-3x2">
        <button class="action-btn shop-item-btn shop-item" data-item-type="boots">
            <span class="shop-item-icon"><i class="fa-solid fa-boot"></i></span>
            <span class="shop-item-name">Botas</span>
            <span class="shop-item-desc">+SPD (Ativo)</span>
            <span class="shop-item-price"><span class="item-price">58</span> G</span>
        </button>
        <button class="action-btn shop-item-btn shop-item" data-item-type="shield">
            <span class="shop-item-icon"><i class="fa-solid fa-shield-halved"></i></span>
            <span class="shop-item-name">Escudo</span>
            <span class="shop-item-desc">-Dano (Ativo)</span>
            <span class="shop-item-price"><span class="item-price">78</span> G</span>
        </button>
        <button class="action-btn shop-item-btn shop-item" data-item-type="coin">
            <span class="shop-item-icon"><i class="fa-solid fa-coins"></i></span>
            <span class="shop-item-name">Moeda da Sorte</span>
            <span class="shop-item-desc">+Sorte (Ativo)</span>
            <span class="shop-item-price"><span class="item-price">125</span> G</span>
        </button>
        <button class="action-btn shop-item-btn shop-item" data-item-type="sword_fire">
            <span class="shop-item-icon"><i class="fa-solid fa-fire"></i></span>
            <span class="shop-item-name">Espada de Fogo</span>
            <span class="shop-item-desc">+Dano e Queima</span>
            <span class="shop-item-price"><span class="item-price">95</span> G</span>
        </button>
        <button class="action-btn shop-item-btn shop-item" data-item-type="bow_ice">
            <span class="shop-item-icon"><i class="fa-solid fa-snowflake"></i></span>
            <span class="shop-item-name">Arco de Gelo</span>
            <span class="shop-item-desc">Congela e Lentidão</span>
            <span class="shop-item-price"><span class="item-price">88</span> G</span>
        </button>
        <button class="action-btn shop-item-btn shop-item" data-item-type="hammer_thunder">
            <span class="shop-item-icon"><i class="fa-solid fa-bolt"></i></span>
            <span class="shop-item-name">Martelo Trovão</span>
            <span class="shop-item-desc">Atordoa e +Dano</span>
            <span class="shop-item-price"><span class="item-price">102</span> G</span>
        </button>
        <button class="action-btn shop-item-btn shop-item" data-item-type="dagger_poison">
            <span class="shop-item-icon"><i class="fa-solid fa-skull"></i></span>
            <span class="shop-item-name">Adaga Venenosa</span>
            <span class="shop-item-desc">Veneno e +Crítico</span>
            <span class="shop-item-price"><span class="item-price">76</span> G</span>
        </button>
        <button class="action-btn shop-item-btn shop-item" data-item-type="scroll_light">
            <span class="shop-item-icon"><i class="fa-solid fa-sun"></i></span>
            <span class="shop-item-name">Pergaminho Luz</span>
            <span class="shop-item-desc">Dano Sagrado e Cura</span>
            <span class="shop-item-price"><span class="item-price">85</span> G</span>
        </button>
    </div>
    
    <!-- Itens Passivos -->
    <h4 style="color: var(--xp); margin: 20px 0 10px;">ITENS PASSIVOS</h4>
    <div class="shop-grid shop-grid-3x2">
        <button class="action-btn shop-item-btn shop-item" data-item-type="ring_life">
            <span class="shop-item-icon"><i class="fa-solid fa-ring"></i></span>
            <span class="shop-item-name">Anel da Vida</span>
            <span class="shop-item-desc">Regeneração HP</span>
            <span class="shop-item-price"><span class="item-price">68</span> G</span>
        </button>
        <button class="action-btn shop-item-btn shop-item" data-item-type="amulet_mana">
            <span class="shop-item-icon"><i class="fa-solid fa-circle-notch"></i></span>
            <span class="shop-item-name">Amuleto Mana</span>
            <span class="shop-item-desc">Regeneração MP</span>
            <span class="shop-item-price"><span class="item-price">72</span> G</span>
        </button>
        <button class="action-btn shop-item-btn shop-item" data-item-type="cloak_shadows">
            <span class="shop-item-icon"><i class="fa-solid fa-user-ninja"></i></span>
            <span class="shop-item-name">Capa Sombras</span>
            <span class="shop-item-desc">Esquiva e Crítico</span>
            <span class="shop-item-price"><span class="item-price">110</span> G</span>
        </button>
        <button class="action-btn shop-item-btn shop-item" data-item-type="gloves_strength">
            <span class="shop-item-icon"><i class="fa-solid fa-hand-rock"></i></span>
            <span class="shop-item-name">Luvas Força</span>
            <span class="shop-item-desc">+Força e Dano</span>
            <span class="shop-item-price"><span class="item-price">64</span> G</span>
        </button>
        <button class="action-btn shop-item-btn shop-item" data-item-type="boots_swift">
            <span class="shop-item-icon"><i class="fa-solid fa-wind"></i></span>
            <span class="shop-item-name">Botas Velozes</span>
            <span class="shop-item-desc">+Velocidade</span>
            <span class="shop-item-price"><span class="item-price">82</span> G</span>
        </button>
    </div>
    
    <button class="action-btn btn-def" id="close-shop-btn" data-action="close-shop">FECHAR</button>
</div>

<!-- Modal da Skill Tree -->
<div id="skill-tree-modal" style="display: none;">
    <div class="skill-tree-header">
        <h3 class="skill-tree-title">ÁRVORE DE HABILIDADES</h3>
        <div class="skill-tree-info">
            <div class="skill-points-info">
                <span class="skill-points-label">Pontos Disponíveis:</span>
                <span class="skill-points-value" id="skill-points-modal">0</span>
            </div>
            <button class="action-btn btn-def" id="close-skill-tree-btn" data-action="close-skill-tree">FECHAR</button>
        </div>
    </div>
    <div class="skill-tree-content" id="skill-tree-content">
        <!-- Canvas será criado dinamicamente pelo JavaScript -->
    </div>
    <div class="skill-tree-footer">
        <button class="action-btn btn-heal" onclick="skillTree.saveSkillTree()">
            <i class="fa-solid fa-save"></i> SALVAR
        </button>
        <button class="action-btn btn-dmg" onclick="skillTree.loadSkillTree()">
            <i class="fa-solid fa-upload"></i> CARREGAR
        </button>
        <button class="action-btn btn-def" onclick="skillTree.resetSkills()">
            <i class="fa-solid fa-undo"></i> RESETAR
        </button>
    </div>
</div>
<div id="settings-modal" style="display: none;">
    <h3 class="settings-title">CONFIGURAÇÕES</h3>
    <div class="settings-body">
        <label class="settings-row">
            <input type="checkbox" id="settings-mute" data-setting="mute">
            <span><i class="fa-solid fa-volume-high"></i> Mudo (desmarque para som)</span>
        </label>
        <button class="action-btn btn-heal" data-action="manual-save">
            <i class="fa-solid fa-floppy-disk"></i> SALVAR PROGRESSO
        </button>
        <button class="action-btn btn-def" data-action="save-to-slot" data-slot="0">
            <i class="fa-solid fa-save"></i> SALVAR NO SLOT 1
        </button>
        <button class="action-btn btn-def" data-action="save-to-slot" data-slot="1">
            <i class="fa-solid fa-save"></i> SALVAR NO SLOT 2
        </button>
        <button class="action-btn btn-def" data-action="save-to-slot" data-slot="2">
            <i class="fa-solid fa-save"></i> SALVAR NO SLOT 3
        </button>
    </div>
    <button class="action-btn btn-def" data-action="close-settings">FECHAR</button>
</div>

<!-- Árvore de Habilidades -->
<div id="skill-tree-modal" style="display: none;">
    <h3 class="skill-tree-title">ÁRVORE DE HABILIDADES</h3>
    
    <div class="skill-tree-container">
        <!-- Pontos disponíveis -->
        <div class="skill-points-info">
            <div class="skill-points-display">
                <i class="fa-solid fa-star"></i>
                <span id="skill-points-available">0</span> Pontos Disponíveis
            </div>
            <div class="skill-tree-level">
                <i class="fa-solid fa-level-up-alt"></i>
                Nível <span id="skill-tree-level">1</span>
            </div>
        </div>
        
        <!-- Árvore de Habilidades -->
        <div class="skill-tree">
            <!-- Trilha de Força -->
            <div class="skill-branch" data-branch="strength">
                <div class="branch-header">
                    <i class="fa-solid fa-hand-rock"></i>
                    <h4>FORÇA</h4>
                    <span class="branch-desc">Aumenta dano físico e resistência</span>
                </div>
                <div class="branch-nodes">
                    <!-- Nó inicial -->
                    <div class="skill-node starter-node" data-skill="strength_starter">
                        <div class="node-icon">
                            <i class="fa-solid fa-fist-raised"></i>
                        </div>
                        <div class="node-tooltip">
                            <div class="tooltip-title">Iniciante em Força</div>
                            <div class="tooltip-desc">+2 Dano Físico</div>
                            <div class="tooltip-cost">1 Ponto</div>
                        </div>
                    </div>
                    
                    <!-- Nós intermediários -->
                    <div class="skill-node" data-skill="strength_might">
                        <div class="node-icon">
                            <i class="fa-solid fa-dumbbell"></i>
                        </div>
                        <div class="node-tooltip">
                            <div class="tooltip-title">Poderio</div>
                            <div class="tooltip-desc">+3 Dano Físico, +5 HP Máximo</div>
                            <div class="tooltip-cost">1 Ponto</div>
                        </div>
                    </div>
                    
                    <div class="skill-node" data-skill="strength_berserker">
                        <div class="node-icon">
                            <i class="fa-solid fa-fire"></i>
                        </div>
                        <div class="node-tooltip">
                            <div class="tooltip-title">Berserker</div>
                            <div class="tooltip-desc">+4 Dano Físico, +10% Crítico</div>
                            <div class="tooltip-cost">2 Pontos</div>
                        </div>
                    </div>
                    
                    <!-- Nó final -->
                    <div class="skill-node ultimate-node" data-skill="strength_titan">
                        <div class="node-icon">
                            <i class="fa-solid fa-mountain"></i>
                        </div>
                        <div class="node-tooltip">
                            <div class="tooltip-title">Titã</div>
                            <div class="tooltip-desc">+6 Dano Físico, +20 HP, +15% Crítico</div>
                            <div class="tooltip-cost">3 Pontos</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Trilha de Vitalidade -->
            <div class="skill-branch" data-branch="vitality">
                <div class="branch-header">
                    <i class="fa-solid fa-heart"></i>
                    <h4>VITALIDADE</h4>
                    <span class="branch-desc">Aumenta vida e regeneração</span>
                </div>
                <div class="branch-nodes">
                    <!-- Nó inicial -->
                    <div class="skill-node starter-node" data-skill="vitality_starter">
                        <div class="node-icon">
                            <i class="fa-solid fa-shield-alt"></i>
                        </div>
                        <div class="node-tooltip">
                            <div class="tooltip-title">Iniciante em Vitalidade</div>
                            <div class="tooltip-desc">+10 HP Máximo</div>
                            <div class="tooltip-cost">1 Ponto</div>
                        </div>
                    </div>
                    
                    <!-- Nós intermediários -->
                    <div class="skill-node" data-skill="vitality_endurance">
                        <div class="node-icon">
                            <i class="fa-solid fa-heartbeat"></i>
                        </div>
                        <div class="node-tooltip">
                            <div class="tooltip-title">Resistência</div>
                            <div class="tooltip-desc">+15 HP Máximo, +1 Regeneração HP</div>
                            <div class="tooltip-cost">1 Ponto</div>
                        </div>
                    </div>
                    
                    <div class="skill-node" data-skill="vitality_toughness">
                        <div class="node-icon">
                            <i class="fa-solid fa-shield-virus"></i>
                        </div>
                        <div class="node-tooltip">
                            <div class="tooltip-title">Tenacidade</div>
                            <div class="tooltip-desc">+20 HP Máximo, -10% Dano Recebido</div>
                            <div class="tooltip-cost">2 Pontos</div>
                        </div>
                    </div>
                    
                    <!-- Nó final -->
                    <div class="skill-node ultimate-node" data-skill="vitality_immortal">
                        <div class="node-icon">
                            <i class="fa-solid fa-infinity"></i>
                        </div>
                        <div class="node-tooltip">
                            <div class="tooltip-title">Imortal</div>
                            <div class="tooltip-desc">+30 HP Máximo, +3 Regeneração HP, -20% Dano</div>
                            <div class="tooltip-cost">3 Pontos</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Trilha de Inteligência -->
            <div class="skill-branch" data-branch="intelligence">
                <div class="branch-header">
                    <i class="fa-solid fa-brain"></i>
                    <h4>INTELIGÊNCIA</h4>
                    <span class="branch-desc">Aumenta mana e poder mágico</span>
                </div>
                <div class="branch-nodes">
                    <!-- Nó inicial -->
                    <div class="skill-node starter-node" data-skill="intelligence_starter">
                        <div class="node-icon">
                            <i class="fa-solid fa-book"></i>
                        </div>
                        <div class="node-tooltip">
                            <div class="tooltip-title">Iniciante em Inteligência</div>
                            <div class="tooltip-desc">+5 MP Máximo</div>
                            <div class="tooltip-cost">1 Ponto</div>
                        </div>
                    </div>
                    
                    <!-- Nós intermediários -->
                    <div class="skill-node" data-skill="intelligence_wisdom">
                        <div class="node-icon">
                            <i class="fa-solid fa-graduation-cap"></i>
                        </div>
                        <div class="node-tooltip">
                            <div class="tooltip-title">Sabedoria</div>
                            <div class="tooltip-desc">+8 MP Máximo, +1 Regeneração MP</div>
                            <div class="tooltip-cost">1 Ponto</div>
                        </div>
                    </div>
                    
                    <div class="skill-node" data-skill="intelligence_arcane">
                        <div class="node-icon">
                            <i class="fa-solid fa-hat-wizard"></i>
                        </div>
                        <div class="node-tooltip">
                            <div class="tooltip-title">Arcano</div>
                            <div class="tooltip-desc">+12 MP Máximo, +2 Dano Mágico</div>
                            <div class="tooltip-cost">2 Pontos</div>
                        </div>
                    </div>
                    
                    <!-- Nó final -->
                    <div class="skill-node ultimate-node" data-skill="intelligence_archmage">
                        <div class="node-icon">
                            <i class="fa-solid fa-crown"></i>
                        </div>
                        <div class="node-tooltip">
                            <div class="tooltip-title">Arquimago</div>
                            <div class="tooltip-desc">+20 MP Máximo, +4 Dano Mágico, +2 Regen MP</div>
                            <div class="tooltip-cost">3 Pontos</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Botões de ação -->
        <div class="skill-tree-actions">
            <button class="action-btn btn-def" id="reset-skills-btn" data-action="reset-skills">
                <i class="fa-solid fa-undo"></i> REDEFINIR HABILIDADES
            </button>
            <button class="action-btn btn-def" id="close-skill-tree-btn" data-action="close-skill-tree">
                <i class="fa-solid fa-times"></i> FECHAR
            </button>
        </div>
    </div>
</div>
<div id="death-modal" style="display: none;">
    <h2 style="color: var(--primary); margin-top: 0;">Você conheceu a DERROTA!</h2>
    
    <div id="death-stats">
        <!-- Estatísticas serão inseridas dinamicamente -->
    </div>
    
    <button class="action-btn btn-heal" style="width: 100%; margin-bottom: 10px;" data-action="restart-after-death">
        <i class="fa-solid fa-rotate-left"></i> TENTAR NOVAMENTE
    </button>
    <button class="action-btn btn-atk" style="width: 100%; background: #441111;" data-action="exit-to-menu">
        <i class="fa-solid fa-door-open"></i> MENU INICIAL
    </button>
</div>

<!-- Tela de Transição -->
<div id="transition-screen" style="display: none;">
    <div class="transition-content">
        <div class="transition-left">
            <div class="player-gold-display">
                <i class="fa-solid fa-coins"></i>
                <span id="transition-player-gold">0</span> GOLD
            </div>
            <div class="transition-shop">
                <h3 style="color: var(--accent); margin-bottom: 20px;">LOJA TEMPORÁRIA</h3>
                <div class="shop-items-grid">
                    <!-- Consumíveis -->
                    <div class="shop-item-card" data-item="potion_hp">
                        <div class="shop-item-icon">
                            <i class="fa-solid fa-flask"></i>
                        </div>
                        <div class="shop-item-name">Poção HP</div>
                        <div class="shop-item-price">28 G</div>
                    </div>
                    <div class="shop-item-card" data-item="mana_potion">
                        <div class="shop-item-icon">
                            <i class="fa-solid fa-flask-vial"></i>
                        </div>
                        <div class="shop-item-name">Poção MP</div>
                        <div class="shop-item-price">32 G</div>
                    </div>
                    
                    <!-- Itens Ativos -->
                    <div class="shop-item-card" data-item="sword_fire">
                        <div class="shop-item-icon">
                            <i class="fa-solid fa-fire"></i>
                        </div>
                        <div class="shop-item-name">Espada Fogo</div>
                        <div class="shop-item-price">95 G</div>
                    </div>
                    <div class="shop-item-card" data-item="bow_ice">
                        <div class="shop-item-icon">
                            <i class="fa-solid fa-snowflake"></i>
                        </div>
                        <div class="shop-item-name">Arco Gelo</div>
                        <div class="shop-item-price">88 G</div>
                    </div>
                    <div class="shop-item-card" data-item="hammer_thunder">
                        <div class="shop-item-icon">
                            <i class="fa-solid fa-bolt"></i>
                        </div>
                        <div class="shop-item-name">Martelo Trovão</div>
                        <div class="shop-item-price">102 G</div>
                    </div>
                    <div class="shop-item-card" data-item="dagger_poison">
                        <div class="shop-item-icon">
                            <i class="fa-solid fa-skull"></i>
                        </div>
                        <div class="shop-item-name">Adaga Veneno</div>
                        <div class="shop-item-price">76 G</div>
                    </div>
                    <div class="shop-item-card" data-item="scroll_light">
                        <div class="shop-item-icon">
                            <i class="fa-solid fa-sun"></i>
                        </div>
                        <div class="shop-item-name">Pergaminho Luz</div>
                        <div class="shop-item-price">85 G</div>
                    </div>
                    
                    <!-- Itens Passivos -->
                    <div class="shop-item-card" data-item="ring_life">
                        <div class="shop-item-icon">
                            <i class="fa-solid fa-ring"></i>
                        </div>
                        <div class="shop-item-name">Anel Vida</div>
                        <div class="shop-item-price">68 G</div>
                    </div>
                    <div class="shop-item-card" data-item="amulet_mana">
                        <div class="shop-item-icon">
                            <i class="fa-solid fa-circle-notch"></i>
                        </div>
                        <div class="shop-item-name">Amuleto Mana</div>
                        <div class="shop-item-price">72 G</div>
                    </div>
                    <div class="shop-item-card" data-item="cloak_shadows">
                        <div class="shop-item-icon">
                            <i class="fa-solid fa-user-ninja"></i>
                        </div>
                        <div class="shop-item-name">Capa Sombras</div>
                        <div class="shop-item-price">110 G</div>
                    </div>
                    <div class="shop-item-card" data-item="gloves_strength">
                        <div class="shop-item-icon">
                            <i class="fa-solid fa-hand-rock"></i>
                        </div>
                        <div class="shop-item-name">Luvas Força</div>
                        <div class="shop-item-price">64 G</div>
                    </div>
                    <div class="shop-item-card" data-item="boots_swift">
                        <div class="shop-item-icon">
                            <i class="fa-solid fa-wind"></i>
                        </div>
                        <div class="shop-item-name">Botas Velozes</div>
                        <div class="shop-item-price">82 G</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="transition-right">
            <div class="item-detail-panel" id="item-detail-panel" style="display: none;">
                <div class="item-detail-header">
                    <div class="item-detail-icon" id="detail-icon">
                        <i class="fa-solid fa-flask"></i>
                    </div>
                    <div class="item-detail-name" id="detail-name">Poção HP</div>
                </div>
                <div class="item-detail-description" id="detail-description">
                    +18 HP instantâneo
                </div>
                <div class="item-detail-price" id="detail-price">
                    Preço: 28 G
                </div>
                <button class="shop-detail-buy-btn" id="detail-buy-btn" data-item="">
                    <i class="fa-solid fa-shopping-cart"></i> COMPRAR
                </button>
            </div>
        </div>
        <button class="action-btn btn-heal transition-continue-btn" data-action="continue-transition">
            <i class="fa-solid fa-play"></i> CONTINUAR
        </button>
    </div>
</div>

<!-- Tela de Loot -->
<div id="loot-modal" style="display: none;">
    <h3 style="color: var(--accent); margin-top: 0; text-align: center;">VITÓRIA!</h3>
    <div id="loot-content" style="text-align: center; margin: 20px 0;">
        <!-- Conteúdo dinâmico -->
    </div>
    <button class="action-btn btn-heal" style="width: 100%; margin-top: -10px;" data-action="continue-after-loot">
        <i class="fa-solid fa-forward"></i> CONTINUAR
    </button>
</div>
<div class="main-wrapper" id="game-ui">
    <!-- Header Superior -->
    <header class="game-header">
        <!-- Painel Mestre do Header -->
        <div class="header-master-panel">
            <!-- Cantos decorativos -->
            <div class="corner-tl"></div>
            <div class="corner-tr"></div>
            <div class="corner-bl"></div>
            <div class="corner-br"></div>
            
            <!-- Conteúdo do painel mestre -->
            <div class="header-master-content">
                <!-- Seção esquerda: Habilidades Ativas -->
                <div class="header-left-section">
                    <div class="active-skills-panel">
                        <div class="skills-slots" id="active-skills-slots">
                            <div class="skill-slot"></div>
                            <div class="skill-slot"></div>
                            <div class="skill-slot"></div>
                            <div class="skill-slot"></div>
                            <div class="skill-slot"></div>
                            <div class="skill-slot"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Seção central: Botões de Ação -->
                <div class="header-center-section">
                    <div class="header-actions">
                        <button class="action-btn btn-open-tree hidden-button" data-action="open-skill-tree">
                            <i class="fa-solid fa-diagram-project"></i> SKILLS
                        </button>
                        
                        <button class="action-btn btn-heal btn-shop hidden-button" data-action="open-shop">
                            <i class="fa-solid fa-store"></i> LOJA
                        </button>
                    </div>
                </div>
                
                <!-- Seção direita: Inventário -->
                <div class="header-right-section">
                    <!-- Inventory Panel -->
                    <div class="inventory-panel">
                        <!-- Cantos decorativos -->
                        <div class="corner-tl"></div>
                        <div class="corner-tr"></div>
                        <div class="corner-bl"></div>
                        <div class="corner-br"></div>
                        
                        <!-- Conteúdo do inventário -->
                        <div class="inventory-content">
                            <!-- Active Items Inventory -->
                            <div class="inventory-section">
                                <h4 style="color: var(--accent); margin-bottom: 10px;">ITENS ATIVOS</h4>
                                <div class="inventory-slots" id="active-slots">
                                    <div class="slot"></div>
                                    <div class="slot"></div>
                                    <div class="slot"></div>
                                    <div class="slot"></div>
                                    <div class="slot"></div>
                                </div>
                            </div>
                            
                            <!-- Passive Items Inventory -->
                            <div class="inventory-section">
                                <h4 style="color: var(--xp); margin-bottom: 10px;">ITENS PASSIVOS</h4>
                                <div class="inventory-slots" id="passive-slots">
                                    <div class="slot"></div>
                                    <div class="slot"></div>
                                    <div class="slot"></div>
                                    <div class="slot"></div>
                                    <div class="slot"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <button class="action-btn btn-atk btn-exit" data-action="save-exit">
            <i class="fa-solid fa-door-open"></i> SAIR
        </button>
    </header>

    <!-- Área de Combate Principal -->
    <main class="combat-arena">
        <!-- Seção do Inimigo (acima e à direita) -->
        <section class="enemy-section">
            <div class="enemy-visual">
                <!-- Informações do inimigo acima -->
                <div class="enemy-info">
                    <div class="enemy-name-level">
                        <h3 id="enemy-name">BUSCANDO...</h3>
                        <span id="enemy-level" class="enemy-level">Lv.1</span>
                    </div>
                    <div id="enemy-badges" class="enemy-badges"></div>
                </div>
                
                <!-- Barra de vida acima -->
                <div class="enemy-health-bar">
                    <div class="health-bar-container enemy-bar-container">
                        <div id="enemy-bar-bg" class="enemy-bar-bg"></div>
                        <div id="enemy-bar" class="enemy-bar"></div>
                    </div>
                    <div class="health-text">
                        <span id="enemy-hp">0</span> / <span id="enemy-max-hp">0</span>
                    </div>
                </div>
                
                <!-- Sprite do inimigo abaixo -->
                <div class="enemy-sprite-container">
                    <img id="enemy-img" src="" alt="" class="enemy-sprite">
                    <div class="damage-indicators" id="enemy-damage-indicators"></div>
                </div>
            </div>
        </section>

        <!-- Seção do Player (abaixo e à esquerda) -->
        <section class="player-section">
            <div class="player-visual">
                <div class="player-avatar">
                    <img id="player-img" src="" alt="Player" class="player-sprite">
                    <div class="damage-indicators" id="player-damage-indicators"></div>
                </div>
                
                <!-- Barra de HP movida para cá -->
                <div class="player-level-progress">
                    <div class="xp-bar-container hp-bar-container">
                        <div id="p-hp-bar-bg" class="hp-bar-bg"></div>
                        <div id="p-hp-bar" class="hp-bar"></div>
                    </div>
                    <div class="xp-text">
                        <small>HP: <span id="p-hp">0</span>/<span id="p-max-hp">0</span></small>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Moldura RPG para Ações e Status -->
    <div class="action-frame">
        <!-- Cantos decorativos -->
        <div class="corner-tl"></div>
        <div class="corner-tr"></div>
        <div class="corner-bl"></div>
        <div class="corner-br"></div>
        
        <!-- Conteúdo da moldura -->
        <div class="action-frame-content">
            <!-- Painel de Status do Player (canto esquerdo) -->
            <div class="player-status-panel">
                <div class="player-info-compact">
                    <h3 id="p-display-name">GUERREIRO</h3>
                    <span class="level-badge-compact">NÍVEL <span id="p-lv">1</span></span>
                </div>
                <div class="gold-display-compact">
                    <i class="fa-solid fa-coins"></i>
                    <span id="p-gold">0</span>
                </div>
                
                <!-- Botão Status movido para cá -->
                <button class="action-btn btn-def" id="toggle-stats-btn">
                    <i class="fa-solid fa-chart-line"></i> STATUS
                </button>
                
                <!-- Botão Skill Tree -->
                <button class="action-btn btn-def" id="open-skill-tree-btn" data-action="open-skill-tree">
                    <i class="fa-solid fa-tree"></i> SKILLS
                </button>
            </div>
            
            <!-- Barras de Status -->
            <div class="status-bars-frame">
                <div class="status-item mana">
                    <div class="status-icon"><i class="fa-solid fa-wand-sparkles"></i></div>
                    <div class="bar-container mana-bar-container">
                        <div id="p-mana-bar-bg" class="mana-bar-bg"></div>
                        <div id="p-mana-bar" class="mana-bar"></div>
                    </div>
                    <span class="status-text"><span id="p-mana">0</span></span>
                </div>
                
                <div class="status-item fury">
                <div class="status-icon"><i class="fa-solid fa-fire-glow"></i></div>
                <div class="bar-container fury-bar-container">
                    <div id="p-furia-bar-bg" class="fury-bar-bg"></div>
                    <div id="p-furia-bar" class="fury-bar"></div>
                </div>
                <span class="status-text">FÚRIA</span>
            </div>
            </div>

            <!-- Área de Ações de Combate -->
            <div class="combat-actions" id="action-buttons">
                <!-- Botões serão gerados dinamicamente -->
<!-- ... -->
        </div>
    </div>
</div>

<!-- Loading Screen -->
    <div id="loading-screen" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner">
                <i class="fa-solid fa-spinner fa-spin"></i>
            </div>
            <div class="loading-text">CARREGANDO...</div>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
        </div>
    </div>

<!-- Save Modal -->
    <div id="save-modal" style="display: none;">
        <div class="save-modal-content">
            <div class="save-icon">
                <i class="fa-solid fa-floppy-disk"></i>
            </div>
            <div class="save-message">
                <h3>JOGO SALVO!</h3>
                <p>Seu progresso foi salvo com sucesso</p>
            </div>
            <div class="save-checkmark">
                <i class="fa-solid fa-check"></i>
            </div>
        </div>
    </div>

<!-- Painel de Status Lateral (Oculto por padrão) -->
<aside class="stats-panel" id="stats-panel">
    <div class="stats-header">
        <h3>FICHA DE PERSONAGEM</h3>
        <button class="close-btn" id="close-stats-btn">
            <i class="fa-solid fa-times"></i>
        </button>
    </div>
    
    <div class="stats-content">
        <div class="attributes-section">
            <h4>ATRIBUTOS</h4>
            
            <div class="attribute-card">
                <div class="attr-info" data-stat="str">
                    <i class="fa-solid fa-hand-fist"></i>
                    <span class="attr-name">FORÇA</span>
                    <span class="attr-value" id="stat-str">1</span>
                </div>
                <button class="lvl-up-btn" data-stat="str">+</button>
            </div>
            
            <div class="attribute-card">
                <div class="attr-info" data-stat="spd">
                    <i class="fa-solid fa-bolt"></i>
                    <span class="attr-name">VELOCIDADE</span>
                    <span class="attr-value" id="stat-spd">1</span>
                </div>
                <button class="lvl-up-btn" data-stat="spd">+</button>
            </div>
            
            <div class="attribute-card">
                <div class="attr-info" data-stat="int">
                    <i class="fa-solid fa-brain"></i>
                    <span class="attr-name">INTELIGÊNCIA</span>
                    <span class="attr-value" id="stat-int">1</span>
                </div>
                <button class="lvl-up-btn" data-stat="int">+</button>
            </div>
            
            <div class="attribute-card">
                <div class="attr-info" data-stat="luk">
                    <i class="fa-solid fa-clover"></i>
                    <span class="attr-name">SORTE</span>
                    <span class="attr-value" id="stat-luk">1</span>
                </div>
                <button class="lvl-up-btn" data-stat="luk">+</button>
            </div>
            
            <div class="attribute-card">
                <div class="attr-info" data-stat="vit">
                    <i class="fa-solid fa-heart-pulse"></i>
                    <span class="attr-name">VITALIDADE</span>
                    <span class="attr-value" id="stat-vit">1</span>
                </div>
                <button class="lvl-up-btn" data-stat="vit">+</button>
            </div>
        </div>

        <div class="skills-section">
            <h4>HABILIDADES APRENDIDAS</h4>
            <div id="learned-skills-list" class="learned-skills">
                <!-- Skills aprendidas serão listadas aqui -->
            </div>
        </div>

        <div class="progress-section">
            <h4>PROGRESSO</h4>
            <div class="progress-info">
                <div class="progress-item">
                    <span>Pontos de Skill:</span>
                    <span id="p-skill-points-display" class="highlight">0</span>
                </div>
                <div class="progress-item">
                    <span>Próximo Nível:</span>
                    <span id="p-xp-to-next" class="highlight">100 XP</span>
                </div>
            </div>
        </div>
    </div>
</aside>
<div id="admin-panel" class="admin-panel" aria-hidden="true"></div>
<script src="js/SkillTree.js"></script>
<script type="module" src="js/main.js"></script>
</body>
</html>
